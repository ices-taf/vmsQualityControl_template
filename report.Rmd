---
title: "VMS QC report"
date: "`r format(Sys.time(), '%d %B, %Y')`"
output:
  html_document:
    toc: true
    toc_depth: 2
    toc_float: true
    number_sections: true
---

```{r setup, eval=TRUE, echo=FALSE, cache=FALSE}
library(knitr)
library(dplyr)
library(tidyr)
library(DT)

opts_chunk$set(comment   = NA,
               warning   = FALSE,
               message   = FALSE,
               error     = FALSE,
               echo      = FALSE,
               eval      = TRUE)

options(digits = 4)
```

<!------------------------------------------------------------------------------
Tables & Figures VMS
---------------------------------------------------------------------------- -->

# Quality of the VMS data from country

## Years & number of records for which data has been submitted:

```{r records-by-year-table, results='asis'}
read.taf("report/records_per_year.csv") %>%
  datatable(
    options = list(
      dom = "t"
    ),
    rownames = FALSE
  )
```

```{r records-by-year-plot}
include_graphics("report/records_per_year.png")
```

## Distribution of records by month:

```{r records-by-month-table, results='asis'}
read.taf("report/records_per_month.csv") %>%
  spread(Year, Freq) %>%
  datatable(
    options = list(
      dom = "t"
    ),
    rownames = FALSE
  )
```

```{r records-by-month-plot}
include_graphics("report/records_per_month.png")
```

## Spatial extent of data submitted by year:
```{r spatial-extent-by-year-table, results='asis'}
read.taf("report/spatial_extent_by_year.csv") %>%
  datatable(
    options = list(
      dom = "t"
    ),
    rownames = FALSE
  ) %>%
  formatRound(
    columns = c("min lon", "max lon", "min lat", "max lat"),
    digits = 3
  )
```

```{r spatial-extent-by-year-full-plot}
include_graphics("report/spatial_extent_by_year_full.png")
```

```{r spatial-extent-by-year-core-plot}
include_graphics("report/spatial_extent_by_year_core.png")
```

## Distribution of number of unique vessels per c-square:

## Frequency of vessel length categories by year:

```{r records-per-vessel-length-cat-table, results='asis'}
read.taf("report/records_per_vessel_length_cat.csv") %>%
  spread(Year, Freq) %>%
  datatable(
    options = list(
      dom = "t"
    ),
    rownames = FALSE
  )
```

```{r records-per-vessel-length-cat-plot}
include_graphics("report/records_per_vessel_length_cat.png")
```
